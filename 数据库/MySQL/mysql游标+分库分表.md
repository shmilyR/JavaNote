# 游标
## 游标定义
游标的设计是一种数据缓冲区的思想，用来存放SQL语句执行的结果。游标是在先从数据库中检索出数据之后，才能继续灵活操作的技术。游标类似于指向数据结构堆栈中的指针，用来pop出所指向的数据，每次只能取一个。
## 游标的优缺点
### 优点
游标是针对行操作的，所以从数据库中select查询得到的每一行可以进行分开的独立的相同或不同的操作，是一种分离的思想。可以满足对某个结果行进行特殊的操作。游标是面向集合与面向行的设计思想之间的一种桥梁。
### 缺点 
游标只能一行一行操作，在数据量大的情况下，不适用，速度过慢。当数据量大时，会造成内存不足现象。
### 使用场景
主要用在循环处理、存储过程、函数中。
## 游标的使用
### 游标的使用步骤
游标定义->打开游标->使用游标->关闭游标->释放游标
1. 定义游标
```sql
declare <游标名> cursor for select 语句
```
2. 打开游标
```sql
open <游标名>
```
3. 使用游标
```sql
declare 变量1 数据类型(与列值的数据类型相同) 
declare 变量2 数据类型
declare 变量3 数据类型
fetch [next | prior | first | last] from <游标名> [into] 变量1 变量2 变量3
```
next:取下一行数据，游标一开始默认的第一行之前，故要让游标指向第一行，就必须第一次就执行fetch next 的操作。  
into:将每一行中每个对应的列下的数据放到与列的数据类型相同的变量中。    
4. 关闭游标
```sql
close <游标名>
```
5. 释放游标
```sql
deallocate <游标名>
```
# 分库分表
## 分库分表的原因：
关系型数据库本身系统性能瓶颈，单机存储容量，连接数，处理能力等都很有限，面对互联网的大量数据以及高并发访问，便有了分表分库。
减小数据库的负担。  
注意：分表分库是指将数据库的数据物理拆分到多个实例或者多台机器上，而不是在本机上进行分库分表。 
## 分库分表的方案
### 1. 垂直拆分

### 2. 水平拆分
